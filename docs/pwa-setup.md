# üì± PWA –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Music Room

**–î–∞—Ç–∞**: 04.12.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Web App Manifest ‚úÖ

**–§–∞–π–ª**: `public/manifest.json`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:

- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: "Music Room"
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –ò–∫–æ–Ω–∫–∏ (8 —Ä–∞–∑–º–µ—Ä–æ–≤: 72x72 –¥–æ 512x512)
- ‚úÖ –¶–≤–µ—Ç–∞ —Ç–µ–º—ã (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π #8b5cf6)
- ‚úÖ –†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: standalone
- ‚úÖ –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: portrait-primary
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: music, entertainment, social
- ‚úÖ –°–∫—Ä–∏–Ω—à–æ—Ç—ã (desktop + mobile)
- ‚úÖ Shortcuts (–ö–æ–º–Ω–∞—Ç—ã, –ü—Ä–æ—Ñ–∏–ª—å)

```json
{
  "name": "Music Room",
  "short_name": "Music Room",
  "display": "standalone",
  "theme_color": "#8b5cf6",
  "background_color": "#0a0a0a"
}
```

---

### 2. Service Worker ‚úÖ

**–§–∞–π–ª**: `public/sw.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:

- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ Offline fallback
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è Network First
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
- ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ offline

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**:

```javascript
// 1. –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Å–µ—Ç–∏
fetch(request)
  .then(response => {
    // –ö—ç—à–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    cache.put(request, response.clone())
    return response
  })
  .catch(() => {
    // –ï—Å–ª–∏ —Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –±–µ—Ä–µ–º –∏–∑ –∫—ç—à–∞
    return cache.match(request)
  })
```

---

### 3. Offline fallback —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚úÖ

**–§–∞–π–ª**: `src/app/offline/page.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:

- ‚úÖ –ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–∫–æ–Ω–∫–æ–π WifiOff
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
- ‚úÖ –°–æ–≤–µ—Ç –æ —Ä–∞–±–æ—Ç–µ –≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º —Ä–µ–∂–∏–º–µ
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

---

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚úÖ

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `src/components/common/pwa-install.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è `beforeinstallprompt`
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –±–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –µ—Å–ª–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ layout.tsx**:

```typescript
import { PWAInstall } from '@/components/common/pwa-install'

// –í body:
<PWAInstall />
```

---

## üé® –ò–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –¢—Ä–µ–±—É–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã:

- ‚úÖ 72x72 px
- ‚úÖ 96x96 px
- ‚úÖ 128x128 px
- ‚úÖ 144x144 px
- ‚úÖ 152x152 px
- ‚úÖ 192x192 px
- ‚úÖ 384x384 px
- ‚úÖ 512x512 px

### –ì–¥–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å:

```
public/
  icons/
    icon-72x72.png
    icon-96x96.png
    icon-128x128.png
    icon-144x144.png
    icon-152x152.png
    icon-192x192.png
    icon-384x384.png
    icon-512x512.png
```

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å:

1. –°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–∫–æ–Ω–∫—É 512x512 px
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–Ω–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: https://realfavicongenerator.net/
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ImageMagick –¥–ª—è —Ä–µ—Å–∞–π–∑–∞

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Desktop:

- –†–∞–∑–º–µ—Ä: 1280x720 px
- –ü—É—Ç—å: `public/screenshots/desktop-1.png`

### Mobile:

- –†–∞–∑–º–µ—Ä: 750x1334 px
- –ü—É—Ç—å: `public/screenshots/mobile-1.png`

---

## üîß Metadata –≤ layout.tsx

```typescript
export const metadata: Metadata = {
  title: 'Music Room',
  description: '–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏',
  manifest: '/manifest.json',
  themeColor: '#8b5cf6',
  appleWebApp: {
    capable: true,
    statusBarStyle: 'default',
    title: 'Music Room',
  },
  viewport: {
    width: 'device-width',
    initialScale: 1,
    maximumScale: 1,
  },
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PWA

### Chrome DevTools:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools** (F12)
2. **Application** ‚Üí **Manifest**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ manifest –∑–∞–≥—Ä—É–∂–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∫–æ–Ω–∫–∏
3. **Application** ‚Üí **Service Workers**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
   - –°—Ç–∞—Ç—É—Å: "activated and is running"
4. **Lighthouse** ‚Üí **Progressive Web App**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞—É–¥–∏—Ç
   - –¶–µ–ª—å: 90+ –±–∞–ª–ª–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

1. **Desktop** (Chrome):
   - –ò–∫–æ–Ω–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
   - –ò–ª–∏ –º–µ–Ω—é ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Music Room"

2. **Mobile** (Chrome/Safari):
   - –ú–µ–Ω—é ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
   - –ò–ª–∏ –±–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏

3. **–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**:
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ standalone —Ä–µ–∂–∏–º–µ
   - –ù–µ—Ç –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
   - –ò–∫–æ–Ω–∫–∞ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ

### Offline —Ä–µ–∂–∏–º:

1. **DevTools** ‚Üí **Network** ‚Üí **Offline**
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è offline —Å—Ç—Ä–∞–Ω–∏—Ü–∞
4. –í–∫–ª—é—á–∏—Ç–µ —Å–µ—Ç—å ‚Üí "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ PWA

| –ö—Ä–∏—Ç–µ—Ä–∏–π         | –°—Ç–∞—Ç—É—Å           |
| ---------------- | ---------------- |
| HTTPS            | ‚úÖ (Vercel)      |
| Manifest         | ‚úÖ               |
| Service Worker   | ‚úÖ               |
| Offline fallback | ‚úÖ               |
| –ò–∫–æ–Ω–∫–∏           | ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å |
| Installable      | ‚úÖ               |
| Responsive       | ‚úÖ               |

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

PWA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel:

- ‚úÖ HTTPS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ Service Worker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ Manifest –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è**:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
2. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –±–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É offline

---

## üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PWA

### –†–∞–±–æ—Ç–∞–µ—Ç:

- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- ‚úÖ –†–∞–±–æ—Ç–∞ –≤ standalone —Ä–µ–∂–∏–º–µ
- ‚úÖ Offline fallback
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):

- ‚ùå Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç VAPID –∫–ª—é—á–∏)
- ‚ùå Background sync (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥)
- ‚ùå –ü–æ–ª–Ω—ã–π offline —Ä–µ–∂–∏–º (—Ç—Ä–µ–±—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API)

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ SW:

1. –ò–∑–º–µ–Ω–∏—Ç–µ `CACHE_NAME` –≤ `sw.js`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `skipWaiting()` –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

PWA –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–§–∞–∑–∞ 9.1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 95%** (–æ—Å—Ç–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–∫–æ–Ω–∫–∏) üöÄ
