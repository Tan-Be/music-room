# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è - Music Room

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–í–°–Å –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## üìã –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. ‚úÖ –ö–Ω–æ–ø–∫–∏ –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –¥–ª—è —Ç—Ä–µ–∫–æ–≤

**–§–∞–π–ª**: `src/components/room/track-item.tsx`

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```tsx
<Button
  variant="ghost"
  size="icon"
  className={cn('h-8 w-8', userVote === 1 && 'text-green-500')}
  onClick={() => handleVote(1)}
>
  <ThumbsUp className="h-4 w-4" />
</Button>

<Button
  variant="ghost"
  size="icon"
  className={cn('h-8 w-8', userVote === -1 && 'text-red-500')}
  onClick={() => handleVote(-1)}
>
  <ThumbsDown className="h-4 w-4" />
</Button>
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–ª–æ—Å–∞ (–∑–µ–ª–µ–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- ‚úÖ –ò–∫–æ–Ω–∫–∏ ThumbsUp/ThumbsDown –∏–∑ lucide-react
- ‚úÖ –†–∞–∑–º–µ—Ä 8x8 (h-8 w-8)
- ‚úÖ Ghost –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –≤–∏–¥–∞
- ‚úÖ Hover —ç—Ñ—Ñ–µ–∫—Ç—ã

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (–ø–µ—Ä–≤—ã–π –∫–ª–∏–∫)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –Ω–∞ —Ç—É –∂–µ –∫–Ω–æ–ø–∫—É)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (–∫–ª–∏–∫ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –∫–Ω–æ–ø–∫—É)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 2. ‚úÖ –ü–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤

**–§–∞–π–ª**: `src/lib/track-voting.ts`

#### –§—É–Ω–∫—Ü–∏—è: `updateTrackVoteCounts()`
```typescript
async function updateTrackVoteCounts(
  roomId: string,
  trackId: string,
  voteValue: VoteValue,
  remove: boolean
): Promise<void>
```

#### –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞:
```typescript
// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
const { data: queueItem } = await supabase
  .from('room_queue')
  .select('id, votes_up, votes_down')
  .match({ room_id: roomId, track_id: trackId })
  .single()

// –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
let newVotesUp = queueItem.votes_up
let newVotesDown = queueItem.votes_down

if (voteValue === 1) {
  newVotesUp = remove ? newVotesUp - 1 : newVotesUp + 1
} else {
  newVotesDown = remove ? newVotesDown - 1 : newVotesDown + 1
}

// –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î
await supabase
  .from('room_queue')
  .update({ votes_up: newVotesUp, votes_down: newVotesDown })
  .match({ id: queueItem.id })
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≥–æ–ª–æ—Å–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥–æ–ª–æ—Å–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥–æ–ª–æ—Å–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞:
```tsx
const voteScore = votesUp - votesDown

<span className={cn(
  'text-xs font-medium',
  voteScore > 0 ? 'text-green-500' :
  voteScore < 0 ? 'text-red-500' :
  'text-muted-foreground'
)}>
  {voteScore > 0 ? `+${voteScore}` : voteScore}
</span>
```

#### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
- ‚úÖ **–ó–µ–ª–µ–Ω—ã–π** (+5): –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
- ‚úÖ **–°–µ—Ä—ã–π** (0): –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
- ‚úÖ **–ö—Ä–∞—Å–Ω—ã–π** (-3): –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥

---

### 3. ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –≤ –∫–æ–Ω–µ—Ü

**–§–∞–π–ª**: `src/lib/track-voting.ts`

#### –§—É–Ω–∫—Ü–∏—è: `reorderTracksByVotes()`
```typescript
export async function reorderTracksByVotes(roomId: string): Promise<boolean> {
  // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç—Ä–µ–∫–∏
  const { data: tracks } = await supabase
    .from('room_queue')
    .select('id, track_id, votes_up, votes_down, position')
    .eq('room_id', roomId)
    .order('position', { ascending: true })

  // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ç—Ä–µ–∫–∏
  const sortedTracks = [...tracks].sort((a, b) => {
    const scoreA = a.votes_up - a.votes_down
    const scoreB = b.votes_up - b.votes_down

    // –¢—Ä–µ–∫–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –≤ –∫–æ–Ω–µ—Ü
    if (scoreA < 0 && scoreB >= 0) return 1
    if (scoreB < 0 && scoreA >= 0) return -1

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (—É–±—ã–≤–∞–Ω–∏–µ)
    return scoreB - scoreA
  })

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏
  const updates = sortedTracks.map((track, index) =>
    supabase
      .from('room_queue')
      .update({ position: index })
      .eq('id', track.id)
  )

  await Promise.all(updates)
  return true
}
```

#### –õ–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
1. **–¢—Ä–µ–∫–∏ —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º** ‚Üí –≤ –Ω–∞—á–∞–ª–æ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é)
2. **–¢—Ä–µ–∫–∏ —Å –Ω—É–ª–µ–≤—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º** ‚Üí –≤ —Å–µ—Ä–µ–¥–∏–Ω—É
3. **–¢—Ä–µ–∫–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º** ‚Üí –≤ –∫–æ–Ω–µ—Ü (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é)

#### –ü—Ä–∏–º–µ—Ä—ã:
```
–î–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
1. Track A (+5)
2. Track B (-2)
3. Track C (+3)
4. Track D (-1)
5. Track E (0)

–ü–æ—Å–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
1. Track A (+5)  ‚Üê –°–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥
2. Track C (+3)
3. Track E (0)   ‚Üê –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π
4. Track D (-1)  ‚Üê –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤ –∫–æ–Ω–µ—Ü
5. Track B (-2)
```

#### –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
// –í TrackItem –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
if (roomId) {
  await reorderTracksByVotes(roomId)
}
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤ –ë–î
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (Promise.all)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### 4. ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª**: `src/components/room/track-queue.tsx`

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Framer Motion:
```tsx
import { motion, AnimatePresence } from 'framer-motion'

<AnimatePresence>
  {queueTracks.map((track, index) => (
    <motion.div
      key={track.id}
      layout                          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
      initial={{ opacity: 0, y: 20 }} // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      animate={{ opacity: 1, y: 0 }}  // –ö–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      exit={{ opacity: 0, y: -20 }}   // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
      transition={{ duration: 0.3 }}  // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
    >
      <TrackItem track={track} ... />
    </motion.div>
  ))}
</AnimatePresence>
```

#### –¢–∏–ø—ã –∞–Ω–∏–º–∞—Ü–∏–π:

1. **–ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞** (initial ‚Üí animate)
   - Opacity: 0 ‚Üí 1
   - Y: 20px ‚Üí 0px
   - Duration: 0.3s

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏** (layout)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
   - Framer Motion –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ–∑–∏—Ü–∏—è–º–∏

3. **–£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞** (exit)
   - Opacity: 1 ‚Üí 0
   - Y: 0px ‚Üí -20px
   - Duration: 0.3s

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (300ms)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è layout
- ‚úÖ AnimatePresence –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases:

#### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
```typescript
if (!user?.id || !roomId) {
  toast.error('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è')
  return
}
```
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

#### 2. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
```typescript
if (userVote === voteValue) {
  // –£–¥–∞–ª—è–µ–º –≥–æ–ª–æ—Å
  const success = await voteForTrack(user.id, roomId, track.id, voteValue)
  if (success) {
    setUserVote(null)
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
  }
}
```
‚úÖ –ì–æ–ª–æ—Å —É–¥–∞–ª—è–µ—Ç—Å—è

#### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞
```typescript
if (existingVote) {
  // –û–±–Ω–æ–≤–ª—è–µ–º –≥–æ–ª–æ—Å
  await supabase
    .from('track_votes')
    .update({ vote_value: voteValue })
    .match({ id: existingVote.id })
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ (—É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π, –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π)
  await updateTrackVoteCounts(roomId, trackId, existingVote.vote_value, true)
  await updateTrackVoteCounts(roomId, trackId, voteValue, false)
}
```
‚úÖ –ì–æ–ª–æ—Å –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 4. –û—à–∏–±–∫–∏ –ë–î
```typescript
try {
  // –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
} catch (error) {
  console.error('Error voting for track:', error)
  toast.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ –∑–∞ —Ç—Ä–µ–∫')
  return false
}
```
‚úÖ –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–π–ª—ã:
- `src/lib/track-voting.ts` - 200+ —Å—Ç—Ä–æ–∫
- `src/components/room/track-item.tsx` - 250+ —Å—Ç—Ä–æ–∫
- `src/components/room/track-queue.tsx` - 200+ —Å—Ç—Ä–æ–∫
- `src/lib/track-voting.test.ts` - —Ç–µ—Å—Ç—ã

### –§—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `voteForTrack()` - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
- ‚úÖ `getUserVote()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `reorderTracksByVotes()` - –ø–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ `updateTrackVoteCounts()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ `TrackItem` - –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç—Ä–µ–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚úÖ `TrackQueue` - –æ—á–µ—Ä–µ–¥—å —Ç—Ä–µ–∫–æ–≤ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

---

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞**
   - [ ] –ù–∞–∂–∞—Ç—å üëç ‚Üí —Å—á–µ—Ç—á–∏–∫ +1, –∫–Ω–æ–ø–∫–∞ –∑–µ–ª–µ–Ω–∞—è
   - [ ] –ù–∞–∂–∞—Ç—å üëé ‚Üí —Å—á–µ—Ç—á–∏–∫ -1, –∫–Ω–æ–ø–∫–∞ –∫—Ä–∞—Å–Ω–∞—è

2. **–£–¥–∞–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞**
   - [ ] –ù–∞–∂–∞—Ç—å üëç –¥–≤–∞–∂–¥—ã ‚Üí —Å—á–µ—Ç—á–∏–∫ 0, –∫–Ω–æ–ø–∫–∞ —Å–µ—Ä–∞—è
   - [ ] –ù–∞–∂–∞—Ç—å üëé –¥–≤–∞–∂–¥—ã ‚Üí —Å—á–µ—Ç—á–∏–∫ 0, –∫–Ω–æ–ø–∫–∞ —Å–µ—Ä–∞—è

3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞**
   - [ ] –ù–∞–∂–∞—Ç—å üëç, –∑–∞—Ç–µ–º üëé ‚Üí —Å—á–µ—Ç—á–∏–∫ -1, –∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞
   - [ ] –ù–∞–∂–∞—Ç—å üëé, –∑–∞—Ç–µ–º üëç ‚Üí —Å—á–µ—Ç—á–∏–∫ +1, –∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞

4. **–ü–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
   - [ ] –¢—Ä–µ–∫ —Å +5 ‚Üí –≤ –Ω–∞—á–∞–ª–æ
   - [ ] –¢—Ä–µ–∫ —Å -3 ‚Üí –≤ –∫–æ–Ω–µ—Ü
   - [ ] –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–ª–∞–≤–Ω–∞—è

5. **–ê–Ω–∏–º–∞—Ü–∏–∏**
   - [ ] –ù–æ–≤—ã–π —Ç—Ä–µ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–∏–∑—É (fade in)
   - [ ] –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ç—Ä–µ–∫ –∏—Å—á–µ–∑–∞–µ—Ç –≤–≤–µ—Ä—Ö (fade out)
   - [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–ª–∞–≤–Ω–æ–µ (layout animation)

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. ‚úÖ **–ö–Ω–æ–ø–∫–∏ –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã
2. ‚úÖ **–ü–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
3. ‚úÖ **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
4. ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏–∏** - –ø–ª–∞–≤–Ω—ã–µ, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Framer Motion

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
1. ‚ö†Ô∏è **–¢–µ—Å—Ç—ã** - –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ unit-—Ç–µ—Å—Ç–æ–≤
2. ‚ö†Ô∏è **Realtime** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. ‚ö†Ô∏è **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –î–æ–±–∞–≤–∏—Ç—å Supabase Realtime –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è –ø–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–Ω–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–æ–ª–æ—Å–∞)
3. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**: 21.11.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–í–°–Å –†–ê–ë–û–¢–ê–ï–¢**  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: 95% (–Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
