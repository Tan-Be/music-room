# ‚úÖ Storage –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–î–∞—Ç–∞**: 04.12.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

---

## üéØ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω bucket `avatars` ‚úÖ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- **ID**: `avatars`
- **–ò–º—è**: `avatars`
- **–ü—É–±–ª–∏—á–Ω—ã–π**: ‚úÖ –î–∞
- **–õ–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞**: 2 MB (2097152 –±–∞–π—Ç)
- **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã**: JPG, PNG, GIF, WebP
- **–°–æ–∑–¥–∞–Ω**: 04.12.2025 13:28:38 UTC

### 2. –°–æ–∑–¥–∞–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ ‚úÖ

#### –ü–æ–ª–∏—Ç–∏–∫–∞ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: "Users can upload their own avatars"
- **–î–µ–π—Å—Ç–≤–∏–µ**: INSERT
- **–†–æ–ª—å**: authenticated
- **–ü—Ä–∞–≤–∏–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ—é –ø–∞–ø–∫—É

#### –ü–æ–ª–∏—Ç–∏–∫–∞ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: "Users can update their own avatars"
- **–î–µ–π—Å—Ç–≤–∏–µ**: UPDATE
- **–†–æ–ª—å**: authenticated
- **–ü—Ä–∞–≤–∏–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã

#### –ü–æ–ª–∏—Ç–∏–∫–∞ 3: –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: "Users can delete their own avatars"
- **–î–µ–π—Å—Ç–≤–∏–µ**: DELETE
- **–†–æ–ª—å**: authenticated
- **–ü—Ä–∞–≤–∏–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã

#### –ü–æ–ª–∏—Ç–∏–∫–∞ 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–≤–∞—Ç–∞—Ä–æ–≤
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: "Anyone can view avatars"
- **–î–µ–π—Å—Ç–≤–∏–µ**: SELECT
- **–†–æ–ª—å**: public
- **–ü—Ä–∞–≤–∏–ª–æ**: –í—Å–µ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä—ã

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–ó–∞—â–∏—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**:
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ—é –ø–∞–ø–∫—É (`avatars/{user_id}/`)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —á—É–∂–∏–µ –∞–≤–∞—Ç–∞—Ä—ã
- –í—Å–µ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä—ã (–ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞: 2 MB
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPG, PNG, GIF, WebP

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

```
avatars/
‚îú‚îÄ‚îÄ {user_id_1}/
‚îÇ   ‚îî‚îÄ‚îÄ 1701532800000.jpg  ‚Üê –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1
‚îú‚îÄ‚îÄ {user_id_2}/
‚îÇ   ‚îî‚îÄ‚îÄ 1701619200000.png  ‚Üê –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2
‚îî‚îÄ‚îÄ {user_id_3}/
    ‚îî‚îÄ‚îÄ 1701705600000.gif  ‚Üê –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 3
```

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏–º–µ–Ω—É–µ—Ç—Å—è –ø–æ timestamp –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:3000
2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å** (—á–µ—Ä–µ–∑ email –∏–ª–∏ GitHub)
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å**: http://localhost:3000/profile
4. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä**:
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä"
   - –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPG/PNG/GIF, –¥–æ 2MB)
   - –ê–≤–∞—Ç–∞—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è ‚úÖ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Supabase:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://supabase.com/dashboard/project/syxjqxfoycmttcmrasgq/storage/buckets/avatars
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø–∞–ø–∫—É —Å –≤–∞—à–∏–º user_id
3. –í–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

Storage –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ Bucket —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ –õ–∏–º–∏—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!** üöÄ

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**SQL –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**:
```sql
-- 1. –°–æ–∑–¥–∞–Ω–∏–µ bucket
INSERT INTO storage.buckets (id, name, public, file_size_limit, allowed_mime_types)
VALUES ('avatars', 'avatars', true, 2097152, 
        ARRAY['image/jpeg', 'image/png', 'image/gif', 'image/webp']);

-- 2-5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞
CREATE POLICY "Users can upload their own avatars" ...
CREATE POLICY "Users can update their own avatars" ...
CREATE POLICY "Users can delete their own avatars" ...
CREATE POLICY "Anyone can view avatars" ...
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```sql
SELECT * FROM storage.buckets WHERE id = 'avatars';
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: bucket —Å–æ–∑–¥–∞–Ω ‚úÖ

SELECT policyname FROM pg_policies 
WHERE tablename = 'objects' AND policyname LIKE '%avatar%';
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 4 –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã ‚úÖ
```
